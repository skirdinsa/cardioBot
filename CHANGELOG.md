# Changelog

Все важные изменения в проекте CardioBot документируются в этом файле.

Формат основан на [Keep a Changelog](https://keepachangelog.com/ru/1.0.0/),
и проект следует [семантическому версионированию](https://semver.org/lang/ru/).

## [0.2.0] - 2026-01-05

### Добавлено
- Фиксация времени измерений в таблице Google Sheets с учетом часового пояса пользователя
  - Время записывается в колонку B для утренних измерений
  - Время записывается в колонку I для вечерних измерений
  - Функция `get_current_time()` для получения текущего времени по таймзоне пользователя
- Расчет и вывод скользящего среднего за последние 7 дней
  - Метод `get_moving_average()` в `SheetsManager`
  - Отдельный расчет для утренних и вечерних измерений
  - Вывод среднего в сообщении после сохранения измерений (если доступно минимум 2 измерения)
- Вывод версии бота в команде `/help`

### Изменено
- Улучшена точность работы напоминаний
  - Интервал проверки задач уменьшен с 60 до 10 секунд в scheduler
  - Добавлено детальное логирование времени срабатывания напоминаний с указанием таймзоны
- Обновлена структура колонок в таблице для поддержки времени измерений
  - Утро: B (время), C-H (измерения)
  - Вечер: I (время), J-O (измерения)

### Удалено
- Команда `/version` (функционал перенесен в `/help`)

### Исправлено
- Проблема с задержкой отправки напоминаний

## [0.1.6] - 2026-01-04

### Добавлено
- Команда `/settings` для настройки таймзоны пользователя
  - Таймзона сохраняется в `context.user_data` с персистентностью
  - Таймзона отображается в команде `/start`
- Умные напоминания
  - Бот проверяет перед отправкой напоминания, не было ли уже внесено измерение
  - Если измерение не внесено, напоминания отправляются 3 раза: в указанное время, через 30 минут, через 60 минут
  - Как только измерение внесено, дальнейшие напоминания не отправляются
- Учет таймзоны для даты и расписания напоминаний
- Удаление промежуточных сообщений и ссылка на таблицу в итоговом сообщении
- Файл версии (`version`) и команда `/version`

## [0.1.0] - 2025-12-XX

### Добавлено
- Первоначальная версия бота
- Функционал записи утренних и вечерних измерений давления
- Интеграция с Google Sheets
- Система напоминаний
- Анализ показателей давления с цветовой индикацией
